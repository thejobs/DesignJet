CREATE DATABASE DESIGNJET;
USE DESIGNJET;
CREATE TABLE MARCAS (
  `MRCCOD` INT NOT NULL AUTO_INCREMENT,
  `MRCDESC` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`MRCCOD`))
ENGINE = InnoDB;

CREATE TABLE PRODUTOS (
  `PRDCOD` INT NOT NULL AUTO_INCREMENT,
  `PRDNOME` VARCHAR(200) NULL,
  `PRDDESC` TEXT NULL,
  `PRDPRECO` DECIMAL(10,2) NULL,
  `PRDDESCONTO` DECIMAL(10,2) NULL,
  `PRDQTD` INT NULL,
  `PRDPESO` DECIMAL(10,2) NULL,
  `PRDLARG` INT NULL,
  `PRDALT` INT NULL,
  `PRDCOMP` INT NULL,
  `PRDMARCA` INT NOT NULL,
  PRIMARY KEY (`PRDCOD`),
  INDEX `fk_PRODUTOS_MARCAS1_idx` (`PRDMARCA` ASC),
  CONSTRAINT `fk_PRODUTOS_MARCAS1`
    FOREIGN KEY (`PRDMARCA`)
    REFERENCES MARCAS (`MRCCOD`)
)
ENGINE = InnoDB;


CREATE TABLE CATEGORIAS (
  `CATCOD` INT NOT NULL AUTO_INCREMENT,
  `CATDESC` VARCHAR(150) NOT NULL,
  PRIMARY KEY (`CATCOD`))
ENGINE = InnoDB;

CREATE TABLE SUBCAT (
  `SCATCOD` INT NOT NULL AUTO_INCREMENT,
  `SCATDESC` VARCHAR(150) NULL,
  `SCATCATEGORIA` INT NOT NULL,
  PRIMARY KEY (`SCATCOD`),
  INDEX `fk_SUBCAT_CATEGORIAS1_idx` (`SCATCATEGORIA` ASC),
  CONSTRAINT `fk_SUBCAT_CATEGORIAS1`
    FOREIGN KEY (`SCATCATEGORIA`)
    REFERENCES CATEGORIAS (`CATCOD`)
)
ENGINE = InnoDB;

CREATE TABLE PRDCAT (
  `PCAT` INT NOT NULL AUTO_INCREMENT,
  `PCATPRODUTO` INT NOT NULL,
  `PCATSUBCAT` INT NOT NULL,
  PRIMARY KEY (`PCAT`),
  INDEX `fk_PRDCAT_PRODUTOS1_idx` (`PCATPRODUTO` ASC),
  INDEX `fk_PRDCAT_SUBCAT1_idx` (`PCATSUBCAT` ASC),
  CONSTRAINT `fk_PRDCAT_PRODUTOS1`
    FOREIGN KEY (`PCATPRODUTO`)
    REFERENCES PRODUTOS (`PRDCOD`),
  CONSTRAINT `fk_PRDCAT_SUBCAT1`
    FOREIGN KEY (`PCATSUBCAT`)
    REFERENCES SUBCAT (`SCATCOD`)
)
ENGINE = InnoDB;

CREATE TABLE CLIENTES (
  `CLICOD` INT NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`CLICOD`))
ENGINE = InnoDB;

CREATE TABLE PEDIDO (
  `PEDCOD` INT NOT NULL AUTO_INCREMENT,
  `PEDDATA` DATE NULL,
  `PEDCLIENTE` INT NOT NULL,
  `PEDSITUACAO` INT NULL,
  PRIMARY KEY (`PEDCOD`, `PEDCLIENTE`),
  INDEX `fk_PEDIDO_CLIENTES1_idx` (`PEDCLIENTE` ASC),
  CONSTRAINT `fk_PEDIDO_CLIENTES1`
    FOREIGN KEY (`PEDCLIENTE`)
    REFERENCES CLIENTES (`CLICOD`)
)
ENGINE = InnoDB;

CREATE TABLE ITENS (
  `ITNCOD` INT NOT NULL AUTO_INCREMENT,
  `ITNPRODUTO` INT NOT NULL,
  `ITNQTD` INT NULL,
  `ITNPRECO` DECIMAL(10,2) NULL,
  `ITNPEDIDO` INT NOT NULL,
  PRIMARY KEY (`ITNCOD`),
  INDEX `fk_ITENS_PRODUTOS_idx` (`ITNPRODUTO` ASC),
  INDEX `fk_ITENS_PEDIDO1_idx` (`ITNPEDIDO` ASC),
  CONSTRAINT `fk_ITENS_PRODUTOS`
    FOREIGN KEY (`ITNPRODUTO`)
    REFERENCES PRODUTOS (`PRDCOD`),
  CONSTRAINT `fk_ITENS_PEDIDO1`
    FOREIGN KEY (`ITNPEDIDO`)
    REFERENCES PEDIDO (`PEDCOD`)
)
ENGINE = InnoDB;




/*
SELECT * FROM `PRODUTOS` 
LEFT JOIN PRDCAT ON PRDCOD = PCATPRODUTO
LEFT JOIN SUBCAT ON PCATSUBCAT = SCATCOD
LEFT JOIN CATEGORIAS ON SCATCATEGORIA = CATCOD


SELECT * FROM CATEGORIAS 
LEFT JOIN SUBCAT ON SCATCATEGORIA = CATCOD



SELECT PRDCOD,PRDNOME,SCATCOD,SCATDESC,CATCOD,CATDESC FROM `PRODUTOS` 
LEFT JOIN PRDCAT ON PRDCOD = PCATPRODUTO
LEFT JOIN SUBCAT ON PCATSUBCAT = SCATCOD
LEFT JOIN CATEGORIAS ON SCATCATEGORIA = CATCOD

*/





